const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ghl-payment-element.KhtmMLV1.css","./PaymentElementComponent.BtAYlWo5.css","./PaymentElementModal.BJjaqg3C.css"])))=>i.map(i=>d[i]);
import{d as $t,y as Bt,r as y,c as Le,o as Vt,a as O,b as x,u as k,n as rt,e as B,h as C,t as ee,q as ve,p as Re,B as qt,D as Ht,w as Wt,m as Jt,F as zt,i as Gt,E as le,k as Kt,s as Ue,v as Fe}from"./BJulYKC0.js";import{_ as Qt}from"./DYa7OZHt.js";import{u as Zt,l as jt,m as Ne,j as Yt,ad as pe,P as te,o as nt,p as ot,E as st,ag as Xt,a as Se,g as Ee,b as we,ai as lt,q as ea}from"./CFkpPN2T.js";import{u as ta,S as I,E as Q}from"./HTGX6kZW.js";import{t as aa,f as ra}from"./Bo5G88AL.js";import{F as it}from"./DM3q50Qf.js";import{h as na,f as Me,b as oa,g as sa,d as la,e as ia}from"./DLtpNheL.js";import{p as ua}from"./wwLfBoTf.js";import{u as ca}from"./D0Zd6DRx.js";import{P as M,C as ut,s as Ae,S as ye,b as ct,f as Oe,N as dt,A as mt}from"./LMdvGtSd.js";import{_ as da}from"./scbb9fcB.js";import"./BlkUynWJ.js";import"./DTMQaITi.js";import"./DLCKK_lP.js";import"./DCJFimIK.js";import"./DcXEb9Sl.js";import"./Dc7Unr3b.js";import"./Dzdl_FEh.js";import"./CYRfsorP.js";import"./BDaSgtuY.js";import"./CLMHpQE0.js";import"./DW-3PSLe.js";const ma=Ue(()=>Fe(()=>import("./DcWxzlpZ.js"),[],import.meta.url).then(v=>v.default||v)),va=Ue(()=>Fe(()=>import("./AycwJBLh.js"),__vite__mapDeps([0,1]),import.meta.url).then(v=>v.default||v)),pa=Ue(()=>Fe(()=>import("./C_5oNwYY.js"),__vite__mapDeps([0,2]),import.meta.url).then(v=>v.default||v)),ya=["id","href","target","rel","data-animation-class","aria-label"],fa={key:0,style:{"margin-right":"5px"},class:"button-icon-start"},_a={class:"main-heading-button"},ha={key:1,style:{"margin-left":"5px"},class:"button-icon-end"},ga={class:"sub-heading-button"},Pa={key:1,class:"recaptcha-container button-recaptcha-container"},Ia={key:0},ba=["disabled","data-animation-class","id","aria-label"],Sa={key:0,class:"button-icon-start"},Ea={class:"main-heading-button"},wa={key:1,class:"button-icon-end"},Oa={class:"sub-heading-button"},ka={class:"btn-loader-position",style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"}},Ta={key:0},xa=["id"],Ca={key:0,class:"card-el-error-msg"},La={key:3,class:"card-el-error-msg error-message",style:{"justify-content":"center"}},Ra={inheritAttrs:!1},tr=$t({...Ra,__name:"Button",props:{element:{type:Object,required:!0},classStyles:{type:Array,required:!0}},setup(v){var Ze,je,Ye,Xe,et,tt,at;const i=v,a=Zt(),{openPopup:vt}=ta(),De=jt(i.element),{call:pt,createMembershipToken:$e,mailTo:yt,sms:ft,goToNextFunnelStep:ie,openUrl:ke,downloadFile:_t,getNextFunnelStepURL:ht,goToStep:gt}=ca(),Pt=Bt(),{$bus:Be}=Pt;let ae=(je=(Ze=i.element.extra)==null?void 0:Ze.text)==null?void 0:je.value;ae=Ne(ae);let re=(Xe=(Ye=i.element.extra)==null?void 0:Ye.subText)==null?void 0:Xe.value;re=Ne(re);const It=a.value.funnelId,bt=a.value.stepId,St=a.value.funnelPageId,h=a.value.locationId,H=(at=(tt=(et=i.element.extra)==null?void 0:et.productId)==null?void 0:tt.value)==null?void 0:at.id,f=y(!1),fe=y(!1),Te=y(""),xe=y(""),w=y(),Ve=y(!1),_e=y(""),ne=y(""),L=y(!1),W=y(!1),Et=Le(()=>{var e;return((e=w.value)==null?void 0:e.price.type)==="recurring"}),u=y(),R=y(""),ue=y(!1),J=y(),ce=y(""),qe=y(!1),$=y(!0),z=y(),He=Gt(),We=y(),Z=y({mode:"payment",amount:0,currency:"",contact:{id:"",full_name:"",email:"",phone:"",shippingAddress:{city:"",state:"",country:"",zipCode:"",line1:""}}}),he=y(),ge=y(),A=y({mode:"payment",amount:0,currency:"usd",enableBNPL:!0,paymentMethodConfiguration:a.value.isLivePaymentMode?He.public.STRIPE_DEFAULT_CONFIGURATION_LIVE:He.public.STRIPE_DEFAULT_CONFIGURATION_TEST}),Je=y(""),j=y(!1),{action:{value:Y},visitWebsite:{value:V}}=i.element.extra,G=Le(()=>{var e;return((e=a.value.paymentProviderDetails)==null?void 0:e.provider)===M.CUSTOM_PROVIDER&&!!a.value.customProviderPublishableKey&&Y===I.SELL_PRODUCT}),wt=async e=>{e.type==="ready"?($.value=!1,z.value="",f.value=!1):e.type==="processing"?(L.value=!0,z.value=""):e.type==="error"?(e.message==="Request failed with status code 429"?(J.value=void 0,ue.value=!0):z.value=e.message,L.value=!1,$.value=!1):e.type==="success"?(z.value="",L.value=!1,await Ot(e)):e.type==="close"&&(z.value="Payment cancelled",L.value=!1,$.value=!1)},Ot=async e=>{try{let t=localStorage.getItem("_ud");t&&(t=JSON.parse(t));const{paymentResponseData:l}=await na(t,e.data,e.provider,h);await de(l)}catch(t){z.value=t}finally{sessionStorage.removeItem("orderResponse"),sessionStorage.removeItem("contactResponse")}},ze=()=>{const e=(ae??"")+" "+(re??"");if(ae||re)return e;if(Y===I.GO_TO_URL){const{visitWebsite:{value:t}}=i.element.extra;return t==null?void 0:t.url}return e},kt=e=>{if(!e){ce.value="Verification failed! Please try again";return}ce.value="",J.value=e},Ge=[I.CLICK_TO_CALL,I.CLICK_TO_SMS,I.GO_TO_URL,I.GO_TO_STEP];Ge.includes(Y)&&(fe.value=!0,Yt(V==null?void 0:V.url)||(Te.value=Qe())),Vt(()=>{Ge.includes(Y)&&(fe.value=!0,Te.value=Qe()),a.value.orderFormVersion===2&&H&&Y===I.SELL_PRODUCT&&(Tt(),he.value=JSON.parse(localStorage.getItem("_ud")||"{}").country)});async function Tt(){var e,t,l,c,d,m,o,_,p,g;try{const r=await it.findProductById({productId:H});let b=localStorage.getItem("pmc_id");A.value.paymentMethodConfiguration=b;const N=(e=r==null?void 0:r.price)==null?void 0:e.setupFee,T=(t=r==null?void 0:r.price)==null?void 0:t.trialPeriod,S=(l=r==null?void 0:r.price)==null?void 0:l.amount,P=N?T?N:S+N:T?0:S;r.amount=P,w.value={...r,qty:1,amount:r.amount},ne.value=(c=r==null?void 0:r.price)==null?void 0:c.currency,Z.value.amount=w.value.amount,Z.value.currency=ne.value,Z.value.mode=((d=w.value)==null?void 0:d.price.type)==="recurring"?"subscription":"payment",Z.value.productDetails=[{productId:(m=r==null?void 0:r.product)==null?void 0:m._id,priceId:(o=r==null?void 0:r.price)==null?void 0:o._id}],A.value.amount=w.value.amount,A.value.currency=ne.value.toLowerCase(),((_=w.value)==null?void 0:_.price.type)==="recurring"?A.value.mode="subscription":w.value.amount?A.value.mode="payment":(A.value.mode="setup",A.value.amount=void 0);let n=localStorage.getItem("_ud");n&&(n=JSON.parse(n),Z.value.contact={id:n==null?void 0:n.id,full_name:n==null?void 0:n.full_name,email:n==null?void 0:n.email,phone:n==null?void 0:n.phone,shippingAddress:{city:n==null?void 0:n.city,state:ge.value,country:n==null?void 0:n.country,zipCode:n==null?void 0:n.postal_code,line1:n==null?void 0:n.address1}}),setTimeout(()=>{qe.value=!0},1e3)}catch(r){const b=((g=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:g.message)||(r==null?void 0:r.message)||"Not able to fetch products!";console.error(b),alert("Not able to fetch products!")}}async function xt(){var t,l,c,d,m,o,_,p,g,r,b,N,T,S,P,n,D,q,se,Pe,Ie,be;const{action:e}=i.element.extra;switch(e.value){case"openPopup":{const s=((t=i.element.extra.popupId)==null?void 0:t.value)??"";aa(a.value.stepId),vt(s);break}case"url":{const{visitWebsite:s}=i.element.extra;ke(s.value);break}case I.SHOW_HIDE_ELEMENT:{const{hideElements:s,showElements:U}=i.element.extra;ot(s.value),nt(U.value);break}case I.HIDE_ELEMENT:{const{hideElements:s}=i.element.extra;ot(s.value);break}case I.SHOW_ELEMENT:{const{showElements:s}=i.element.extra;nt(s.value);break}case"scroll-to-element":{const{scrollToElement:s}=i.element.extra;Be.$emit("scroll-to-element",s.value);break}case"go-to-next-funnel-step":{f.value=!0,ie();break}case I.GO_TO_STEP:{f.value=!0,ie(i.element.extra.stepPath.value);break}case"sell-product":{if(f.value)return;f.value=!0;const s=`_pl_${a.value.funnelId}`,U=localStorage.getItem(s);let F;if(U&&(F=JSON.parse(U)),a.value.orderFormVersion===2){const K=le("provider").value;if(((l=w.value)==null?void 0:l.amount)===0){const E=Ke();if(!E)return;const me=await Me(h,E);if(me.paymentProvider==="free-checkout"||!a.value.requireCreditCard){const Ce={altId:a.value.locationId,altType:"location",source:{type:a.value.pageType===pe.FUNNEL?pe.FUNNEL:pe.WEBINAR?pe.WEBINAR:pe.WEBSITE,id:a.value.funnelId,name:a.value.funnelName},products:[{id:w.value._id,qty:1}]},At=await te.getAmountSummary(Ce),Ut=((c=w.value)==null?void 0:c.price.type)==="recurring",Ft=((d=At.recurringSummary)==null?void 0:d.subtotalWithDiscount)>0,Dt=me.paymentProvider==="free-checkout";if(Ut&&Ft||Dt){((o=(m=a.value)==null?void 0:m.paymentProviderDetails)==null?void 0:o.provider)===M.SQUARE&&a.value.squareMerchantGatewayId?X(Oe):(await oe(),j.value=!0);return}else await oe(),L.value=!1,await de({});return}}if(w.value.amount>0&&le("provider").value!=="pp"){const E=Ke();if(!E)return;if((await Me(h,E)).paymentProvider==="free-checkout"){((p=(_=a.value)==null?void 0:_.paymentProviderDetails)==null?void 0:p.provider)===M.SQUARE&&a.value.squareMerchantGatewayId?X(Oe):(await oe(),j.value=!0);return}}if(K===M.CUSTOM_PROVIDER&&(F!=null&&F.manualPaymentMethodId)){X(ut,F==null?void 0:F.manualPaymentMethodId);return}if(le("provider").value==="pp"){Ve.value=!0,X(ct);return}else{if((((r=(g=a.value)==null?void 0:g.paymentProviderDetails)==null?void 0:r.provider)===M.AUTHORIZE_NET||((N=(b=a.value)==null?void 0:b.paymentProviderDetails)==null?void 0:N.provider)===M.WHITE_LABEL&&((S=(T=a.value)==null?void 0:T.paymentProviderDetails)==null?void 0:S.whiteLabelProvider)===M.AUTHORIZE_NET)&&a.value.merchantLoginId){X(mt);return}else if((((n=(P=a.value)==null?void 0:P.paymentProviderDetails)==null?void 0:n.provider)===M.NMI||((q=(D=a.value)==null?void 0:D.paymentProviderDetails)==null?void 0:q.provider)===M.WHITE_LABEL&&((Pe=(se=a.value)==null?void 0:se.paymentProviderDetails)==null?void 0:Pe.whiteLabelProvider)===M.NMI)&&a.value.nmiMerchantGatewayId){X(dt);return}else if(((be=(Ie=a.value)==null?void 0:Ie.paymentProviderDetails)==null?void 0:be.provider)===M.SQUARE&&a.value.squareMerchantGatewayId){X(Oe);return}else if(G.value){await Mt(M.CUSTOM_PROVIDER);return}const E=a.value.stripePublishableKey,me=a.value.stripeAccountId,Ce=a.value.stripePublishableKey;if(E&&Ce)_e.value=await ua.loadStripe(E,{stripeAccount:me||void 0});else{alert("Stripe account not found!");return}Ct()}}else Lt();break}case"click-to-call":{const s=i.element.extra;pt(s[Q.PHONE_NUMBER].value);break}case"click-to-sms":{const s=i.element.extra;ft(s[Q.PHONE_NUMBER].value);break}case"click-to-mail":{const s=i.element.extra;yt(s[Q.EMAIL_ADDRESS].value);break}case I.DOWNLOAD_FILE:{const s=i.element.extra;if(s[Q.DOWNLOAD_FILE].value&&s[Q.DOWNLOAD_FILE].value.fileUrl){W.value=!0;try{await _t(s[Q.DOWNLOAD_FILE].value)}catch(U){console.error("Download failed:",U)}finally{W.value=!1}}break}case I.GO_TO_MEMBERSHIP:{try{let s;const U=a.value.locationId,{ct:F,previewUrl:K}=le(`_mf_${U}`).value;location.hostname==="localhost"?s=`http://localhost:4040/library/?domain=${K}&token=${F}&location_id=${U}`:s=`${K}/library?&token=${F}&location_id=${U}`,ke({url:s,newTab:!1})}catch{alert("Sorry something went wrong.")}break}default:console.error(`Invalid action type received: ${e.value}`)}}const Ke=()=>{let e=localStorage.getItem("_ud");e&&(e=JSON.parse(e),sessionStorage.setItem("contactResponse",JSON.stringify(e)));const t=e==null?void 0:e.customer_id;if(!t){R.value="Contact not found!";return}return t};function de(e){var t,l,c,d,m,o,_;try{const p=e==null?void 0:e.membershipPurchase;p!=null&&p.length&&$e(h,p[0].token);const g=e==null?void 0:e.membershipToken;g&&$e(h,g),Kt(()=>{ra("track","Upsell")});const{saleAction:r,stepPath:b,visitWebsite:N}=i.element.extra;if(!r)if(a.value.funnelNextStep){ie();return}else throw new Error("Redirect not handled");if(a.value.orderFormVersion===2){const T=`_pl_${a.value.funnelId}`,S=localStorage.getItem(T);if(S){let P=JSON.parse(S);P.products.push(w.value),P.total+=(l=(t=u.value)==null?void 0:t.order)==null?void 0:l.amount,P.tax=(m=(d=(c=u.value)==null?void 0:c.order)==null?void 0:d.taxSummary)==null?void 0:m.map(n=>{var q;const D=(q=P==null?void 0:P.tax)==null?void 0:q.find(se=>se._id===n._id);return D?{...D,amount:D.amount+n.amount}:n}),P.orderIds=[u.value.order._id,...P.orderIds],st(T,JSON.stringify(P))}}else{const T=`_pl_v1_${a.value.funnelId}`,S=localStorage.getItem(T);if(S){let P=JSON.parse(S);P.push((_=(o=i==null?void 0:i.element.extra)==null?void 0:o.productId)==null?void 0:_.value),st(T,JSON.stringify(P))}}switch(r.value){case"url":if(N&&N.value&&N.value.url){ke(N.value);break}else throw new Error("Redirect not handled");case"step-path":if(b&&b.value){ie(b.value);break}else throw new Error("Redirect not handled");default:if(a.value.funnelNextStep){ie();break}else throw new Error("Redirect not handled")}}catch(p){{const g=JSON.parse(localStorage.getItem("_ud")||"{}");console.log(p);const r=Ae.includes(localStorage.getItem(`pmt_${a.value.funnelId}_${g==null?void 0:g.id}`)||"")?"We are proccessing your order with the bank. We'll confirm you order after bank's confirmation.":`Order successfully placed! 
 However, Something went wrong while displaying this webpage, please contact the seller.`;alert(r)}f.value=!1;return}}const oe=async()=>{var c,d;a.value.countryList.length===0&&await oa();const e=Le(()=>{var m;return((m=sa(he==null?void 0:he.value))==null?void 0:m.states.map(o=>({iso:o.code,name:o.name})))??[]});let t=localStorage.getItem("_ud");t&&(t=JSON.parse(t),sessionStorage.setItem("contactResponse",JSON.stringify(t)));const l=t==null?void 0:t.customer_id;if(!l){R.value="Contact not found!";return}if(ue.value&&!J.value){ce.value="Invalid Captcha!",L.value=!1,f.value=!1;return}if(ge.value=((c=e.value.find(m=>m.name===(t==null?void 0:t.state)))==null?void 0:c.iso)??"",Z.value.contact.shippingAddress.state=ge.value,u.value=await la({contactId:l,domain:a.value.domain,pageUrl:a.value.pageUrl,locationId:h,productPreviewList:[{_id:H,qty:1}],store:a.value,subType:Xt.UPSELL,traceId:t==null?void 0:t.traceId,reCaptchaToken:J.value,toZip:t.postal_code,toState:ge.value,toCountry:t.country,toCity:t.city,toStreetAddress:t.address1}),J.value=void 0,(d=u.value)!=null&&d.error){u.value.status===429&&(ue.value=!0),R.value=u.value.message??"Error creating order!",L.value=!1,f.value=!1;return}sessionStorage.setItem("orderResponse",JSON.stringify(u.value))};async function Ct(){var e,t,l,c,d,m,o,_,p,g;try{if(!H)throw new Error("No product Id found for initiating stripe payment");if(R.value="",await oe(),A.value.amount=(t=(e=u.value)==null?void 0:e.order)==null?void 0:t.amount,A.value.currency=ne.value.toLowerCase(),A.value.mode=((l=w.value)==null?void 0:l.price.type)==="recurring"?"subscription":"payment",!((d=(c=u.value)==null?void 0:c.order)!=null&&d.amount)&&((m=w.value)==null?void 0:m.price.type)!=="recurring"&&(A.value.mode="setup"),!u.value||(o=u.value)!=null&&o.error)return;let r={};r={altId:h,altType:"location",orderId:u.value.order._id,reCaptchaToken:J.value};const b=JSON.parse(localStorage.getItem("_ud")||"{}");Ae.includes(localStorage.getItem(`pmt_${a.value.funnelId}_${b==null?void 0:b.id}`)||"")&&(r.paymentMethodTypes=[ye.sepa]);const N=await Me(h,(_=u.value.order)==null?void 0:_.contactId),T=localStorage.getItem(`pmt_${a.value.funnelId}_${b==null?void 0:b.id}`)||"",S=N.paymentMethod||T;if(!!["klarna","affirm","afterpay_clearpay","amazon_pay","revolut_pay","zip","grabpay","fpx"].includes(S)||((p=u.value.order)==null?void 0:p.amount)===0&&S===ye.bacs){j.value=!0;return}const n=await te.initiateStripePayment(r);if(!n.success){R.value=n.message||"We're sorry, but something went wrong. Please try again.";return}const{clientSecret:D,paymentMethodId:q}=n;if(D&&![ye.bacs,ye.cashapp].includes(S)){let E={};if(Ae.includes(T)?E=await _e.value.confirmSepaDebitPayment(D,{payment_method:q}):S===ye.becs?E=await _e.value.confirmAuBecsDebitPayment(D,{payment_method:q}):E=await _e.value.confirmCardPayment(D,{payment_method:q,setup_future_usage:"off_session"}),E.error){console.error("Failed to confirm card payment!",E.error),E.error.message&&alert(E.error.message);return}}const{orderId:se,paymentIntentId:Pe,subscriptionId:Ie,invoiceId:be,subId:s,txnId:U}=n,F={altId:h,altType:"location",orderId:se,paymentIntentId:Pe,subscriptionId:Ie,invoiceId:be,isAuth:!1,subId:s,txnId:U,attribution:{eventData:Se(),sessionId:Ee(h),sessionFingerprint:we(h)}},K=await te.verifyStripePayment(F);if(!K.success){R.value=K.message||"We're sorry, but something went wrong. Please try again.";return}await de(K)}catch(r){if(((g=r==null?void 0:r.response)==null?void 0:g.status)===429){ue.value=!0,L.value=!1,f.value=!1;return}R.value=lt(r),f.value=!1,console.error(r)}}async function X(e,t){var l,c,d,m,o;try{if(!H)throw new Error(`No product Id found for initiating ${e||"stripe"} payment`);if(L.value=!0,R.value="",await oe(),!u.value||(l=u.value)!=null&&l.error)return;let _;if((c=u.value)!=null&&c.order._id){_={altId:h,altType:"location",orderId:(d=u.value)==null?void 0:d.order._id,attribution:{eventData:Se(),sessionId:Ee(h),sessionFingerprint:we(h)}};let p;switch(e){case mt:{p=await te.authorizeNetOrderPayment(_);break}case dt:{p=await te.nmiOrderPayment(_);break}case ut:{t&&(_.manualPaymentMethodId=t),p=await te.customProviderOrderPayment(_);break}case Oe:{const g=await ia(h,(m=u.value.order)==null?void 0:m.contactId);if(!g||g==="false"){Je.value=((o=w.value)==null?void 0:o.price.type)==="recurring"?"subscription":"",j.value=!0,L.value=!1;return}p=await te.squareOrderPayment({..._,saveCard:!1});break}case ct:j.value=!0,L.value=!1;return;default:console.log("Invalid payment provider");break}if(console.error(p),L.value=!1,!p.success){R.value=p.message||"We're sorry, but something went wrong. Please try again.";return}await de({membershipPurchase:p.membershipPurchase,membershipToken:p.membershipToken})}}catch(_){f.value=!1,L.value=!1,console.error(_),R.value=lt(_)}}async function Lt(){if(H)try{const e=ea(),t={...Se(),fbEventId:e},l=Ee(h),c=we(h),d=await it.funnelPayment({fingerprint:le("msgsndr_id").value,productList:[H],locationId:h,funnelId:It,stepId:bt,pageId:St,domain:a.value.domain,pageUrl:a.value.pageUrl,source:"payment_button",submissionType:3,eventData:t,sessionId:l,sessionFingerprint:c,_mp:le("_mp").value});await de(d)}catch(e){console.error(e)}finally{f.value=!0}}function Qe(){var t,l,c,d,m;let e="";switch(Y){case I.CLICK_TO_CALL:{let o=(t=i.element.extra[Q.PHONE_NUMBER])==null?void 0:t.value;o=o==null?void 0:o.replace("tel:",""),e=`tel:${o}`;break}case I.CLICK_TO_SMS:{let o=(l=i.element.extra[Q.PHONE_NUMBER])==null?void 0:l.value;o=o==null?void 0:o.replace("sms:",""),e=`sms:${o}`;break}case I.GO_TO_URL:{e=V==null?void 0:V.url,e=Ne(e),e&&!e.startsWith("#")&&!/^https?:/.test(e)&&(e=`https://${e}`),xe.value=V!=null&&V.newTab?"_blank":"";break}case I.GO_TO_STEP:{const o=(m=(d=(c=i.element)==null?void 0:c.extra)==null?void 0:d.stepPath)==null?void 0:m.value;e=ht(o,!1);break}}return e}async function Rt(e){if(a.value.videoExistsInPage&&Be.$emit("handle-redirect"),Y===I.GO_TO_STEP){const t=i.element.extra.stepPath.value;gt(e,t)}}function Nt(){j.value=!1,f.value=!1,$.value=!1}async function Mt(e){var l,c,d,m,o;if(!H)throw new Error("No product Id found for initiating stripe payment");if(R.value="",await oe(),!((c=(l=u.value)==null?void 0:l.order)!=null&&c._id&&e===M.CUSTOM_PROVIDER))return;const t={source:"order",sourceId:(m=(d=u==null?void 0:u.value)==null?void 0:d.order)==null?void 0:m._id,sourceDetails:u.value.order,traceId:u.value.traceId,extra:{attribution:{eventData:Se(),sessionId:Ee(h),sessionFingerprint:we(h)}},captchaToken:J.value};(o=We.value)==null||o.confirmPayment(t)}return(e,t)=>{const l=ma,c=va,d=pa;return O(),x(zt,null,[fe.value?(O(),x("a",{key:0,id:`${v.element.id}_btn`,href:Te.value,target:xe.value,rel:xe.value==="_blank"?"noreferrer noopener":void 0,"data-animation-class":k(De),class:rt([v.classStyles,"text-center"]),onClick:t[0]||(t[0]=m=>Rt(m)),"aria-label":ze()},[B("span",{style:ve(f.value?"visibility: hidden;":""),class:"main-heading-group"},[v.element.extra.icon!==""?(O(),x("span",fa)):C("",!0),B("span",_a,ee(k(ae)),1),v.element.extra.icon!==""?(O(),x("span",ha)):C("",!0)],4),v.element.extra.subText&&v.element.extra.subText.value?(O(),x("span",{key:0,style:ve(f.value?"visibility: hidden;":""),class:"sub-heading-group text-xs font-sans"},[B("span",ga,ee(k(re)),1)],4)):C("",!0)],10,ya)):C("",!0),ue.value?(O(),x("section",Pa,[Re(l,{onExpired:t[1]||(t[1]=()=>J.value=""),onVerify:kt}),ce.value?(O(),x("p",Ia,ee(ce.value),1)):C("",!0)])):C("",!0),fe.value?C("",!0):(O(),x("button",{key:2,disabled:f.value||k(G)&&$.value||W.value,"data-animation-class":k(De),id:`${v.element.id}_btn`,style:ve(f.value||k(G)&&$.value||W.value?"cursor: default;":""),class:rt([v.classStyles]),onClick:xt,"aria-label":ze()},[B("div",{style:ve(f.value||k(G)&&$.value||W.value?"visibility: hidden;":""),class:"main-heading-group"},[v.element.extra.icon!==""?(O(),x("div",Sa)):C("",!0),B("div",Ea,ee(k(ae)),1),v.element.extra.icon!==""?(O(),x("div",wa)):C("",!0)],4),v.element.extra.subText&&v.element.extra.subText.value?(O(),x("div",{key:0,style:ve(f.value||k(G)&&$.value||W.value?"visibility: hidden;":""),class:"text-xs font-sans"},[B("div",Oa,ee(k(re)),1)],4)):C("",!0),qt(B("div",ka,[Re(da,{loading:f.value||k(G)&&$.value||W.value,color:"rgb(255, 255, 255)",size:"30px"},null,8,["loading"])],512),[[Ht,f.value||k(G)&&$.value||W.value]])],14,ba)),B("div",null,[qe.value&&k(a).funnelPageId&&k(G)?(O(),x("section",Ta,[B("div",{id:`${v.element.id}-payment-form`,class:"payment-form"},[Re(c,{id:`${v.element.id}-payment-element`,ref_key:"confirmPaymentRef",ref:We,customProviderProps:Z.value,onPaymentCallback:wt},null,8,["id","customProviderProps"]),z.value?(O(),x("div",Ca,[t[2]||(t[2]=B("img",{src:Qt,alt:"alert"},null,-1)),Wt(" "+ee(z.value),1)])):C("",!0)],8,xa)])):C("",!0)]),R.value?(O(),x("div",La,ee(R.value),1)):C("",!0),j.value?(O(),Jt(d,{key:4,extra:i.element.extra,stripeOptions:A.value,order:u.value,traceId:u.value.traceId,element:i.element,styles:v.classStyles,squarePaymentMode:Je.value,showPaypal:Ve.value&&ne.value,paymentProps:{currency:ne.value,mode:k(Et)?"subscription":"onetime"},onClosePaymentElementModal:Nt},null,8,["extra","stripeOptions","order","traceId","element","styles","squarePaymentMode","showPaypal","paymentProps"])):C("",!0)],64)}}});export{tr as default};
